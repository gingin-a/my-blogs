import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,d as a,o as n}from"./app-CUEpYcie.js";const t={};function p(l,i){return n(),e("div",null,i[0]||(i[0]=[a(`<h1 id="uniapp-使用-vue3-的-ref-获取-dom-元素出现-undefined" tabindex="-1"><a class="header-anchor" href="#uniapp-使用-vue3-的-ref-获取-dom-元素出现-undefined"><span>uniapp 使用 vue3 的 ref 获取 dom 元素出现 undefined</span></a></h1><p>在小程序端通过<code>ref</code>获取不到 dom 元素，查阅资料发现小程序中，uniapp 的<code>ref</code>要绑定在子组件中才能被获取，如果绑定在<code>view</code>，是获取不了的，需要把业务写在一个组件来引用才行。h5 则没有这种情况。<br> 可以通过 uniapp 中的<code>uni.createSelectorQuery()</code>，返回一个 <code>SelectorQuery</code> 对象实例。可以在这个实例上使用 <code>select</code> 等方法选择节点，并使用 <code>boundingClientRect</code> 等方法选择需要查询的信息。</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">view</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> class</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;calc-dom&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">view</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">getCurrentInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;vue&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> instance</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getCurrentInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> query</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> uni</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createSelectorQuery</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">instance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">query</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;.calc-dom&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">boundingClientRect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;得到布局位置信息&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> JSON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">stringify</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;节点离页面顶部的距离为&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">top</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  })</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">exec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3)]))}const r=s(t,[["render",p],["__file","uniapp通过ref获取dom元素失败.html.vue"]]),d=JSON.parse('{"path":"/record/uniapp%E9%80%9A%E8%BF%87ref%E8%8E%B7%E5%8F%96dom%E5%85%83%E7%B4%A0%E5%A4%B1%E8%B4%A5.html","title":"uniapp 使用 vue3 的 ref 获取 dom 元素出现 undefined","lang":"zh-CN","frontmatter":{"date":"2025-01-25T00:00:00.000Z","category":["uniapp","vue"],"tag":["vue","微信小程序"],"description":"uniapp 使用 vue3 的 ref 获取 dom 元素出现 undefined 在小程序端通过ref获取不到 dom 元素，查阅资料发现小程序中，uniapp 的ref要绑定在子组件中才能被获取，如果绑定在view，是获取不了的，需要把业务写在一个组件来引用才行。h5 则没有这种情况。 可以通过 uniapp 中的uni.createSelect...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/my-blogs/record/uniapp%E9%80%9A%E8%BF%87ref%E8%8E%B7%E5%8F%96dom%E5%85%83%E7%B4%A0%E5%A4%B1%E8%B4%A5.html"}],["meta",{"property":"og:site_name","content":"快醒醒"}],["meta",{"property":"og:title","content":"uniapp 使用 vue3 的 ref 获取 dom 元素出现 undefined"}],["meta",{"property":"og:description","content":"uniapp 使用 vue3 的 ref 获取 dom 元素出现 undefined 在小程序端通过ref获取不到 dom 元素，查阅资料发现小程序中，uniapp 的ref要绑定在子组件中才能被获取，如果绑定在view，是获取不了的，需要把业务写在一个组件来引用才行。h5 则没有这种情况。 可以通过 uniapp 中的uni.createSelect..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-11T07:25:51.000Z"}],["meta",{"property":"article:tag","content":"vue"}],["meta",{"property":"article:tag","content":"微信小程序"}],["meta",{"property":"article:published_time","content":"2025-01-25T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-03-11T07:25:51.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"uniapp 使用 vue3 的 ref 获取 dom 元素出现 undefined\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-01-25T00:00:00.000Z\\",\\"dateModified\\":\\"2025-03-11T07:25:51.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"快醒醒\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[],"git":{"createdTime":1739352613000,"updatedTime":1741677951000,"contributors":[{"name":"guoxin","username":"guoxin","email":"17700619938@163.com","commits":3,"url":"https://github.com/guoxin"}]},"readingTime":{"minutes":0.68,"words":205},"filePathRelative":"record/uniapp通过ref获取dom元素失败.md","localizedDate":"2025年1月25日","excerpt":"\\n<p>在小程序端通过<code>ref</code>获取不到 dom 元素，查阅资料发现小程序中，uniapp 的<code>ref</code>要绑定在子组件中才能被获取，如果绑定在<code>view</code>，是获取不了的，需要把业务写在一个组件来引用才行。h5 则没有这种情况。<br>\\n可以通过 uniapp 中的<code>uni.createSelectorQuery()</code>，返回一个 <code>SelectorQuery</code> 对象实例。可以在这个实例上使用 <code>select</code> 等方法选择节点，并使用 <code>boundingClientRect</code> 等方法选择需要查询的信息。</p>","autoDesc":true}');export{r as comp,d as data};
